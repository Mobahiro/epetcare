{% extends 'clinic/base.html' %}
{% block title %}Pet Details - ePetCare{% endblock %}
{% block content %}
<div class="toolbar">
  <h2>{{ pet.name }}</h2>
  <div>
    <a class="btn btn-secondary" href="{% url 'pet_list' %}">‚Üê Back</a>
    <a class="btn" style="background: linear-gradient(90deg, var(--bad) 0%, #b91c1c 100%);" href="{% url 'pet_delete' pet.pk %}">Delete Pet</a>
  </div>
</div>
<p>
  <strong>Owner:</strong> {{ pet.owner.full_name }}<br>
  <strong>Species:</strong> {{ pet.get_species_display }} &nbsp;
  <strong>Breed:</strong> {{ pet.breed|default:'-' }} &nbsp;
  <strong>Sex:</strong> {{ pet.get_sex_display }}
</p>
{% if pet.birth_date %}<p><strong>Birth Date:</strong> {{ pet.birth_date }}</p>{% endif %}
{% if pet.weight_kg %}<p><strong>Weight:</strong> {{ pet.weight_kg }} kg</p>{% endif %}
{% if pet.notes %}<p><strong>Notes:</strong><br>{{ pet.notes|linebreaksbr }}</p>{% endif %}

<div class="toolbar" style="margin-top:16px;">
  <h3>Appointments</h3>
  <a class="btn" href="{% url 'appointment_create' %}">+ New Appointment</a>
</div>
<table>
  <thead>
    <tr><th>Date</th><th>Reason</th><th>Status</th></tr>
  </thead>
  <tbody>
    {% for a in appointments %}
      <tr>
        <td>{{ a.date_time|date:"Y-m-d H:i" }}</td>
        <td>{{ a.reason }}</td>
        <td>
          {% if a.status == 'scheduled' %}
            <span class="badge scheduled">Scheduled</span>
          {% elif a.status == 'completed' %}
            <span class="badge completed">Completed</span>
          {% elif a.status == 'cancelled' %}
            <span class="badge cancelled">Cancelled</span>
          {% else %}
            {{ a.get_status_display }}
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="3">No appointments yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<div class="toolbar" style="margin-top:16px;">
  <h3>Medical Records</h3>
  <a class="btn" href="#">+ Add Record</a>
</div>
<table>
  <thead>
    <tr><th>Date</th><th>Type</th><th>Description</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for record in medical_records %}
      <tr>
        <td>{{ record.visit_date|date:"Y-m-d" }}</td>
        <td>{{ record.condition }}</td>
        <td>{{ record.treatment|truncatechars:50 }}</td>
        <td>
          <span class="badge">Vet Added</span>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="4">No medical records yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<div class="toolbar" style="margin-top:16px;">
  <h3>Prescriptions</h3>
  <span class="muted">Prescribed by veterinarians</span>
</div>
<table>
  <thead>
    <tr><th>Medication</th><th>Dosage</th><th>Date Prescribed</th><th>Status</th></tr>
  </thead>
  <tbody>
    {% for p in prescriptions %}
      <tr>
        <td>{{ p.medication_name }}</td>
        <td>{{ p.dosage }}</td>
        <td>{{ p.date_prescribed|date:"Y-m-d" }}</td>
        <td>
          {% if p.is_active %}
            <span class="badge completed">Active</span>
          {% else %}
            <span class="badge cancelled">Inactive</span>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="4">No prescriptions yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

