{% extends 'clinic/dashboard_base.html' %}
{% load static %}
{% block title %}Pets - ePetCare{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{% static 'clinic/dashboard-common.css' %}?v={% now 'U' %}">
<link rel="stylesheet" href="{% static 'clinic/dashboard-components.css' %}?v={% now 'U' %}">
<link rel="stylesheet" href="{% static 'clinic/dashboard-modern.css' %}?v={% now 'U' %}">
{% endblock %}

{% block dash_content %}
<!-- Hero section -->
<section class="dash-hero">
  <div class="hero-main">
    <div class="hero-title-row">
      <h1 class="hero-title">Your Pets</h1>
      <a class="btn btn-primary" href="{% url 'pet_create' %}">+ New Pet</a>
    </div>
    <div class="hero-meta-line">
      <span class="meta-item">Manage your registered pets and their information.</span>
    </div>
  </div>
  <div class="hero-divider"></div>
</section>

<!-- Summary tiles -->
<section class="summary-tiles">
  <div class="tile">
    <div class="tile-head">
      <div class="tile-icon">ğŸ¾</div>
      <div class="tile-text">
        <div class="tile-title">Total Pets</div>
        <div class="tile-sub">Registered</div>
      </div>
    </div>
    <div class="tile-metric">{{ pets|length }}</div>
  </div>
  <div class="tile">
    <div class="tile-head">
      <div class="tile-icon">ğŸ©º</div>
      <div class="tile-text">
        <div class="tile-title">Health Checks</div>
        <div class="tile-sub">Completed</div>
      </div>
    </div>
    <div class="tile-metric">{{ health_check_count|default:"0" }}</div>
  </div>
  <div class="tile">
    <div class="tile-head">
      <div class="tile-icon">ğŸ“‹</div>
      <div class="tile-text">
        <div class="tile-title">Active Records</div>
        <div class="tile-sub">Medical files</div>
      </div>
    </div>
    <div class="tile-metric">{{ medical_records_count|default:"0" }}</div>
  </div>
</section>

<div class="dash-grid">
  <div class="main-card">
    <div class="card-head">
      <h2>All Pets</h2>
      <div class="head-actions">
        <a class="btn btn-primary btn-sm" href="{% url 'pet_create' %}">+ Add</a>
      </div>
    </div>
    
    {% if pets %}
    <div class="pet-cards-grid">
      {% for pet in pets %}
      <div class="pet-card-modern">
        <div class="pet-header">
          <div class="pet-avatar">
            {% if pet.image %}
            <img src="{{ pet.image_url }}" alt="{{ pet.name }}">
            {% else %}
            {{ pet.name|slice:":1"|upper }}
            {% endif %}
          </div>
          <div class="pet-info">
            <div class="pet-name">{{ pet.name }}</div>
            <div class="pet-breed">{{ pet.get_species_display }}{% if pet.breed %} â€¢ {{ pet.breed }}{% endif %}</div>
          </div>
        </div>
        <div class="pet-details">
          <div class="pet-detail">
            <div class="detail-label">Sex</div>
            <div class="detail-value">{{ pet.get_sex_display|default:"â€”" }}</div>
          </div>
          <div class="pet-detail">
            <div class="detail-label">Weight</div>
            <div class="detail-value">{% if pet.weight_kg %}{{ pet.weight_kg }} kg{% else %}â€”{% endif %}</div>
          </div>
        </div>
        <div class="pet-actions">
          <a href="{% url 'pet_detail' pet.id %}" class="btn-modern btn-secondary btn-sm" style="flex:1;">View Profile</a>
          <a href="{% url 'appointment_create' %}?pet={{ pet.id }}" class="btn-modern btn-primary btn-sm" style="flex:1;">Book Visit</a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty-state" style="padding: 48px 24px; text-align: center;">
      <div class="empty-icon" style="font-size: 48px; margin-bottom: 16px;">ğŸ¾</div>
      <div class="empty-title" style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">No pets registered yet</div>
      <div class="empty-desc" style="color: var(--dash-text-muted); margin-bottom: 16px;">Add your first pet to start managing their health records.</div>
      <a href="{% url 'pet_create' %}" class="btn-modern btn-primary">Add Your First Pet</a>
    </div>
    {% endif %}
  </div>
  
  <aside class="col-right">
    <div class="rail">
      <div class="rail-card">
        <div class="rail-title">Quick Add</div>
        <p class="muted">Register a new pet to manage their health records and appointments.</p>
        <div style="margin-top: 8px;">
          <a class="btn btn-primary btn-sm" href="{% url 'pet_create' %}">Register Pet</a>
        </div>
      </div>
      
      <div class="rail-card">
        <div class="rail-title">Pet Care Tips</div>
        <ul style="padding-left: 16px; margin-top: 8px; color: var(--dash-text-muted);">
          <li>Schedule regular check-ups</li>
          <li>Keep vaccinations up to date</li>
          <li>Maintain proper diet and exercise</li>
          <li>Watch for changes in behavior</li>
        </ul>
      </div>
    </div>
  </aside>
</div>
{% endblock %}